# Database for Discbro
Here is the docuemntation for the database. This file explains how it is set up, how it is used and why the desiscions that were made, were made.

## Tables
### Users
The "users" table contains 4 datapoints:
- id: A uniqe id for each user.
This id is used to refer to the user in the server. For example: if the user adds another user as a friend, and both accept, it is stored in
the "friends" table as (id, user1, user2), where user1 and user2 are user id's. This number starts at 10000 and counts up.

- username: The username of this account. Displayed as "@username", is can only contain lowercase letters a - z, and numbers 0 - 9.
The username can NOT change. This is mainly used by the users to locate their friends on the app and add them as freinds.

- displayname: The name displayed in most areas of the app, for this account. This dispayname can contain any letter / character the user wishes to use.
This is mainly costemtic, but also what will be seen most places in the app.

- password: This contains the hash generated by the users password, A.K.A their password. 60 characters long, since bcrypt's hashes are 60 characters long.
When the user is created, the password is converted to a hash with 10 salt rounds. After the user is created, the password is discarded and whenever the user tries to log in, the password in the request is compared to the hash.

It also contains data the user can change while using the app. There is a status field, which lets other users know if this user is avaliable to chat or not,
along with a status_text field which lets the user put in any text they want, shown when online. Lastly, there is also a bio field, which is a description alwyas shown on the profile.




TEMPRORARYT STORAGE
create table users (
    -- Account data
   id UNSIGNED INT, -- starts at 1 048 576 so noone fells to special
   username varchar(32), -- @username, can only conatin a-z, 0 - 9. has to be special, and atleast 4 characters long.
   displayname varchar(32), -- displayname, can contain any character
   password varchar(60), -- 60 for hash

   -- Fun stuff
   status UNSIGNED INT, -- 0: offline, 1: online, 2: AFK, 3: do not disturb, 4: disturb (wants to talk to someone)
   -- 0: gray, 1: green, 2: yellow, 3: red, 4: cyan
   status_text varchar(64), -- any text that shows on profile
   bio varchar(128) -- user describes themselves
  
    -- profile picture is stored in "profile_pictures" folder, where each file is named "user-(id).png"
);

create table friends {
    -- Each pair of friends gets a dm
    id UNSIGNED INT PRIMARY KEY,
    user1id UNSIGNED INT NOT NULL, -- user1 is the one who sent the request
    user2id UNSIGNED INT NOT NULL,
    status UNSIGNED INT -- 0: pending, 1: accepted
}

create table friend_group {
    -- Used for group dms since all channels are the same
    -- max 16 members
    id UNSIGNED INT PRIMARY KEY,
    name varchar(64), -- if null, the group shows up as "member1displayname, member2displayname, ..."
    image varchar(128), -- url to image in assets folder

    members varchar(512) -- format: "userid1,userid2,userid3...". first user is owner
    -- to change owner, swap userid1 and whoever is the new owner
}

create table messages {
    id INSIGNED INT PRIMARY KEY,
    channelid UNSIGNED INT NOT NULL,

}

create 